<Window x:Class="TaskManager.Views.MiniQuadrantWidget"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="四象限小组件" Height="300" Width="400"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent"
        Topmost="True" ShowInTaskbar="False" ResizeMode="NoResize">
    
    <Border Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="8" 
           Opacity="0.95" MouseLeftButtonDown="Widget_MouseLeftButtonDown">
        <Grid Margin="5">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- 标题栏 -->
            <Grid Grid.Row="0" Background="#F5F5F5" Margin="-5,-5,-5,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" Text="今日任务" FontWeight="Bold" 
                          VerticalAlignment="Center" Margin="10,5"/>
                
                <Button Grid.Column="1" Name="btnAddTask" Content="+" Width="20" Height="20" 
                       FontSize="12" Margin="2" Click="AddTask_Click" ToolTip="快速添加任务"/>
                
                <Button Grid.Column="2" Name="btnRefresh" Content="↻" Width="20" Height="20" 
                       FontSize="12" Margin="2" Click="Refresh_Click" ToolTip="刷新"/>
                
                <Button Grid.Column="3" Name="btnClose" Content="×" Width="20" Height="20" 
                       FontSize="12" Margin="2" Click="Close_Click" ToolTip="关闭小组件"/>
            </Grid>
            
            <!-- 四象限内容 -->
            <Grid Grid.Row="1" Margin="0,5,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- 第二象限：紧急但不重要 -->
                <Border Grid.Row="0" Grid.Column="0" BorderBrush="#FF9800" BorderThickness="1" 
                        Background="#FFF3E0" Margin="1" CornerRadius="3">
                    <StackPanel>
                        <TextBlock Text="紧急但不重要" FontSize="10" FontWeight="Bold" 
                                  Foreground="#FF9800" HorizontalAlignment="Center" Margin="2"/>
                        <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                            <ItemsControl Name="lstMiniQuadrant2" FontSize="9">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Title}" Margin="2,1" 
                                                  TextWrapping="Wrap" Cursor="Hand"
                                                  MouseLeftButtonDown="TaskItem_Click"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- 第一象限：紧急且重要 -->
                <Border Grid.Row="0" Grid.Column="1" BorderBrush="#F44336" BorderThickness="1" 
                        Background="#FFEBEE" Margin="1" CornerRadius="3">
                    <StackPanel>
                        <TextBlock Text="紧急且重要" FontSize="10" FontWeight="Bold" 
                                  Foreground="#F44336" HorizontalAlignment="Center" Margin="2"/>
                        <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                            <ItemsControl Name="lstMiniQuadrant1" FontSize="9">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Title}" Margin="2,1" 
                                                  TextWrapping="Wrap" Cursor="Hand"
                                                  MouseLeftButtonDown="TaskItem_Click"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- 第四象限：既不紧急也不重要 -->
                <Border Grid.Row="1" Grid.Column="0" BorderBrush="#9E9E9E" BorderThickness="1" 
                        Background="#F5F5F5" Margin="1" CornerRadius="3">
                    <StackPanel>
                        <TextBlock Text="不紧急不重要" FontSize="10" FontWeight="Bold" 
                                  Foreground="#9E9E9E" HorizontalAlignment="Center" Margin="2"/>
                        <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                            <ItemsControl Name="lstMiniQuadrant4" FontSize="9">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Title}" Margin="2,1" 
                                                  TextWrapping="Wrap" Cursor="Hand"
                                                  MouseLeftButtonDown="TaskItem_Click"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>
                </Border>

                <!-- 第三象限：重要但不紧急 -->
                <Border Grid.Row="1" Grid.Column="1" BorderBrush="#2196F3" BorderThickness="1" 
                        Background="#E3F2FD" Margin="1" CornerRadius="3">
                    <StackPanel>
                        <TextBlock Text="重要但不紧急" FontSize="10" FontWeight="Bold" 
                                  Foreground="#2196F3" HorizontalAlignment="Center" Margin="2"/>
                        <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                            <ItemsControl Name="lstMiniQuadrant3" FontSize="9">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding Title}" Margin="2,1" 
                                                  TextWrapping="Wrap" Cursor="Hand"
                                                  MouseLeftButtonDown="TaskItem_Click"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>