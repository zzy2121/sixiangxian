<Window x:Class="TaskManager.Views.TaskFilterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="任务筛选" Height="600" Width="800"
        WindowStartupLocation="CenterOwner">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <TextBlock Grid.Row="0" Text="任务筛选" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>
        
        <!-- 筛选条件 -->
        <GroupBox Grid.Row="1" Header="筛选条件" Margin="0,0,0,15">
            <Grid Margin="10">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- 第一行 -->
                <Label Grid.Row="0" Grid.Column="0" Content="象限:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="1" Name="cmbQuadrantFilter" Margin="5,5,15,5"/>
                
                <Label Grid.Row="0" Grid.Column="2" Content="状态:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="0" Grid.Column="3" Name="cmbStatusFilter" Margin="5,5,0,5"/>
                
                <!-- 第二行 -->
                <Label Grid.Row="1" Grid.Column="0" Content="分类:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="1" Grid.Column="1" Name="cmbCategoryFilter" Margin="5,5,15,5"/>
                
                <Label Grid.Row="1" Grid.Column="2" Content="标签:" VerticalAlignment="Center"/>
                <ComboBox Grid.Row="1" Grid.Column="3" Name="cmbTagFilter" Margin="5,5,0,5"/>
                
                <!-- 第三行 -->
                <Label Grid.Row="2" Grid.Column="0" Content="开始日期:" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="2" Grid.Column="1" Name="dpStartDate" Margin="5,5,15,5"/>
                
                <Label Grid.Row="2" Grid.Column="2" Content="结束日期:" VerticalAlignment="Center"/>
                <DatePicker Grid.Row="2" Grid.Column="3" Name="dpEndDate" Margin="5,5,0,5"/>
                
                <!-- 第四行 -->
                <Label Grid.Row="3" Grid.Column="0" Content="关键词:" VerticalAlignment="Center"/>
                <TextBox Grid.Row="3" Grid.Column="1" Name="txtKeyword" Margin="5,5,15,5"/>
                
                <StackPanel Grid.Row="3" Grid.Column="2" Grid.ColumnSpan="2" Orientation="Horizontal" 
                           HorizontalAlignment="Right" Margin="5">
                    <Button Name="btnApplyFilter" Content="应用筛选" Padding="15,5" Margin="0,0,10,0" Click="ApplyFilter_Click"/>
                    <Button Name="btnClearFilter" Content="清空条件" Padding="15,5" Click="ClearFilter_Click"/>
                </StackPanel>
            </Grid>
        </GroupBox>
        
        <!-- 筛选结果 -->
        <GroupBox Grid.Row="2" Header="筛选结果">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Name="txtResultCount" Margin="10,5" FontWeight="Bold"/>
                
                <DataGrid Grid.Row="1" Name="dgFilterResults" AutoGenerateColumns="False" 
                         CanUserAddRows="False" SelectionMode="Single" GridLinesVisibility="Horizontal"
                         Margin="10">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="标题" Binding="{Binding Title}" Width="*"/>
                        <DataGridTextColumn Header="象限" Binding="{Binding Quadrant}" Width="120"/>
                        <DataGridTextColumn Header="状态" Binding="{Binding Status}" Width="80"/>
                        <DataGridTextColumn Header="分类" Binding="{Binding Category}" Width="80"/>
                        <DataGridTextColumn Header="截止日期" Binding="{Binding DueDate, StringFormat=yyyy-MM-dd}" Width="100"/>
                        <DataGridTextColumn Header="标签" Binding="{Binding TagsDisplay}" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </GroupBox>
        
        <!-- 按钮区域 -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Name="btnApply" Content="应用到主界面" Padding="20,8" Margin="0,0,10,0" 
                   Click="Apply_Click" IsDefault="True"/>
            <Button Name="btnCancel" Content="取消" Padding="20,8" Click="Cancel_Click" IsCancel="True"/>
        </StackPanel>
    </Grid>
</Window>