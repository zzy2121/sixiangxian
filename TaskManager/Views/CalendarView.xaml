<Window x:Class="TaskManager.Views.CalendarView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="日历视图 - 四象限任务管理器" Height="700" Width="1000"
        WindowStartupLocation="CenterScreen">
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 工具栏 -->
        <ToolBar Grid.Row="0">
            <Button Name="btnPrevMonth" Content="◀ 上月" Click="PrevMonth_Click"/>
            <Button Name="btnNextMonth" Content="下月 ▶" Click="NextMonth_Click"/>
            <Separator/>
            <Button Name="btnToday" Content="今天" Click="Today_Click"/>
            <Separator/>
            <ComboBox Name="cmbViewMode" Width="100" SelectionChanged="ViewMode_Changed">
                <ComboBoxItem Content="月视图" Tag="Month"/>
                <ComboBoxItem Content="周视图" Tag="Week"/>
                <ComboBoxItem Content="日视图" Tag="Day"/>
            </ComboBox>
            <Separator/>
            <Button Name="btnAddTask" Content="+ 添加任务" Click="AddTask_Click"/>
            <Button Name="btnRefresh" Content="刷新" Click="Refresh_Click"/>
        </ToolBar>

        <!-- 当前日期显示 -->
        <Grid Grid.Row="1" Background="#F5F5F5" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <TextBlock Name="txtCurrentDate" FontSize="18" FontWeight="Bold" 
                      VerticalAlignment="Center" Margin="10"/>
            
            <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="10">
                <TextBlock Text="标签筛选:" VerticalAlignment="Center" Margin="0,0,5,0"/>
                <ComboBox Name="cmbTagFilter" Width="120" SelectionChanged="TagFilter_Changed">
                    <ComboBoxItem Content="全部标签" Tag=""/>
                </ComboBox>
                <TextBlock Text="分类筛选:" VerticalAlignment="Center" Margin="10,0,5,0"/>
                <ComboBox Name="cmbCategoryFilter" Width="100" SelectionChanged="CategoryFilter_Changed">
                    <ComboBoxItem Content="全部分类" Tag=""/>
                </ComboBox>
            </StackPanel>
        </Grid>

        <!-- 主视图区域 -->
        <Grid Grid.Row="2" Margin="5">
            <!-- 月视图 -->
            <Grid Name="MonthView">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- 星期标题 -->
                <Grid Grid.Row="0" Background="#E3F2FD">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" Text="周日" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="1" Text="周一" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="2" Text="周二" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="3" Text="周三" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="4" Text="周四" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="5" Text="周五" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="6" Text="周六" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                </Grid>
                
                <!-- 日历网格 -->
                <UniformGrid Name="CalendarGrid" Grid.Row="1" Columns="7" Rows="6"/>
            </Grid>

            <!-- 周视图 -->
            <Grid Name="WeekView" Visibility="Collapsed">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <Grid Grid.Row="0" Background="#E8F5E8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <TextBlock Grid.Column="0" Text="时间" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="1" Name="txtWeekDay1" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="2" Name="txtWeekDay2" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="3" Name="txtWeekDay3" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="4" Name="txtWeekDay4" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="5" Name="txtWeekDay5" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="6" Name="txtWeekDay6" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                    <TextBlock Grid.Column="7" Name="txtWeekDay7" HorizontalAlignment="Center" Padding="5" FontWeight="Bold"/>
                </Grid>
                
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                    <Grid Name="WeekTimeGrid"/>
                </ScrollViewer>
            </Grid>

            <!-- 日视图 -->
            <Grid Name="DayView" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- 时间轴 -->
                <StackPanel Grid.Column="0" Background="#FFF3E0">
                    <!-- 时间标签将通过代码生成 -->
                </StackPanel>
                
                <!-- 任务显示区域 -->
                <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                    <Canvas Name="DayTaskCanvas" Background="White"/>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Grid>
</Window>